<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Reactnative | Balloonsys Inc.]]></title>
  <link href="http://balloonsys.github.io/blog/categories/reactnative/atom.xml" rel="self"/>
  <link href="http://balloonsys.github.io/"/>
  <updated>2016-10-12T16:36:22+08:00</updated>
  <id>http://balloonsys.github.io/</id>
  <author>
    <name><![CDATA[Linkou Bian]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[React Native ç»„ä»¶é—´æ•°æ®ä¼ é€’]]></title>
    <link href="http://balloonsys.github.io/blog/2016/10/11/rn-components-communication/"/>
    <updated>2016-10-11T11:14:48+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/10/11/rn-components-communication</id>
    <content type="html"><![CDATA[<p>åœ¨ React Native é¡¹ç›®è¯•ç‚¹è¿‡ç¨‹ä¸­ï¼Œå°è£…çš„ç»„ä»¶ä¹‹é—´éš¾å…éœ€è¦ä¼ é€’æ•°æ®ã€‚æœ¬æ–‡æ€»ç»“äº†å­ç»„ä»¶å¦‚ä½•å°†æ•°æ®ä¼ é€’åˆ°ä½¿ç”¨æ–¹ï¼Œä»¥åŠå¯¹å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ª setState é—®é¢˜çš„æ¢ç©¶ã€‚</p>

<!--more-->


<h2>è®¾è®¡ä¸€ä¸ªå¯å®šåˆ¶çš„ç»„ä»¶</h2>

<p>å½“è®¾è®¡ä¸€ä¸ªç»„ä»¶ä¾›å›¢é˜Ÿä½¿ç”¨ï¼Œé€šå¸¸ä½¿ç”¨æ—¶éœ€è¦å‘å…¶ä¼ é€’ä¸€äº›ä¿¡æ¯ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å‚è€ƒå›½åº†èŠ‚å‰å†™çš„<a href="http://balloonsys.com/blog/2016/09/30/create-your-first-reusable-react-native-component/">åˆ›å»ºä¸€ä¸ª React Native åˆ†éš”çº¿ç»„ä»¶</a>ã€‚</p>

<p>ä¸»è¦æ€è·¯å°±æ˜¯å®šä¹‰å±æ€§ï¼ˆpropTypesï¼‰ï¼Œå¹¶æä¾›é»˜è®¤å±æ€§å€¼ï¼ˆgetDefaultPropsï¼‰ã€‚è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>

<h2>ç»„ä»¶è¿”å›æ•°æ®ç»™ä½¿ç”¨æ–¹</h2>

<h3>åº”ç”¨åœºæ™¯</h3>

<p>å‡è®¾æˆ‘ä»¬çš„æŸä¸ªé¡µé¢ P ä½¿ç”¨åˆ°å°è£…æˆ¿äº§ä¿¡æ¯çš„ houseInfo ç­‰ç»„ä»¶ï¼Œéœ€è¦åœ¨ houseInfo å¡«å†™å®Œæˆ¿æºæ€»ä»· totalPrice åèƒ½æ ¹æ®å½“å‰æ•´ä¸ªé¡µé¢ï¼ˆå«å¤šä¸ªç»„ä»¶ï¼‰çš„è¾“å…¥é¡¹å»éªŒè¯æ˜¯å¦å¯ä»¥ enable æäº¤æŒ‰é’®ï¼Œè€Œä¸”åœ¨ç‚¹å‡»æäº¤æ—¶éœ€è¦èƒ½è®¿é—®åˆ° houseInfo ç­‰ç»„ä»¶å½•å…¥çš„æ•°æ®ï¼ˆåŒ…æ‹¬ totalPrice ç­‰ï¼‰ã€‚</p>

<h3>ç»„ä»¶è®¾è®¡</h3>

<p>houseInfo ç»„ä»¶åŒ…å«è‹¥å¹²ç”± React Native æä¾›çš„ TextInput ç»„ä»¶ï¼Œåœ¨ TextInput çš„ onChangeText äº‹ä»¶ç»‘å®šæˆ‘ä»¬çš„æ–¹æ³•ï¼š</p>

<pre><code class="js">onChangeText={this._updateTotalPrice}
</code></pre>

<p>ä½¿ç”¨åˆ°çš„ _updateTotalPrice æ˜¯å®šä¹‰åœ¨è¯¥ç»„ä»¶é‡Œçš„äº‹ä»¶å“åº”æ–¹æ³•ï¼Œä½¿ç”¨æœ€ç²¾ç®€çš„å†™æ³•è®¾ç½®çŠ¶æ€æœºå˜é‡ï¼š</p>

<pre><code class="js">  _updateTotalPrice(totalPrice) {
    this.setState({totalPrice}, this._onStateUpdated);
  },
</code></pre>

<p>ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿° setState æ–¹æ³•æ˜¯å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œå°†å˜åŒ–é€šçŸ¥åˆ°ç»„ä»¶çš„ä½¿ç”¨è€…çš„æ–¹æ³• _onStateUpdated éœ€è¦æ”¾åœ¨ setState çš„ç¬¬äºŒä¸ªå‚æ•°å¤„ï¼Œå¦åˆ™å– this.state.totalPrice ä»å°†æ˜¯æ—§å€¼ã€‚å®˜æ–¹çš„è§£é‡Šå¦‚ä¸‹ï¼š</p>

<blockquote><p>setState() does not immediately mutate this.state but creates a pending state transition. Accessing this.state after calling this method can potentially return the existing value.</p></blockquote>

<p>åœ¨å®ç° _onStateUpdated æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå£°æ˜ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å±æ€§ï¼š</p>

<pre><code class="js">  propTypes: {
    onGetHouseInfo: React.PropTypes.func
  },
</code></pre>

<p>è¿™æ ·ä½¿ç”¨è€…å°±å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°ç»™è¯¥ç»„ä»¶ï¼Œè¯¥ç»„ä»¶åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨æ­¤æ–¹æ³•å³å¯ä¼ é€’æ•°æ®ç»™ä½¿ç”¨æ–¹ã€‚</p>

<pre><code class="js">  _onStateUpdated() {
    this.props.onGetHouseInfo({totalPrice: this.state.totalPrice,
                                                             // å…¶ä»–è¾“å…¥é¡¹ ...
                              }, this._validate());
  },
</code></pre>

<p>æˆ‘ä»¬åœ¨ä¼ é€’è¾“å…¥çš„å€¼æ—¶ï¼Œè¿˜å°†æœ¬ç»„ä»¶çš„éªŒè¯ç»“æœä¼ é€’å‡ºå»ï¼Œè¿™æ ·ä½¿ç”¨æ–¹å³å¯ç»¼åˆå„ç»„ä»¶çš„ valid å€¼ä»¥æ§åˆ¶æäº¤æŒ‰é’®çš„çŠ¶æ€ã€‚</p>

<pre><code class="js">  _validate() {
    if (XXX) {
      return false;
    }

    return true;
  },
</code></pre>

<h3>ä½¿ç”¨æ–¹</h3>

<p>æˆ‘ä»¬åœ¨ä½¿ç”¨ houseInfo ç­‰ç»„ä»¶ render è¡¨å•é¡µé¢ Pï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="js">&lt;HouseInfo onGetHouseInfo={this._getHouseInfo} /&gt;
</code></pre>

<p>æ­¤å¤„çš„ _getHouseInfo ç”¨äºä»ç»„ä»¶æ¥æ”¶æ•°æ®ï¼Œä»¥å­˜æ”¾åœ¨é¡µé¢çš„ state é‡Œé¢ï¼š</p>

<pre><code class="js">  _getHouseInfo(houseInfo, houseInfoValid) {
    this.setState({houseInfo, houseInfoValid});
  },
</code></pre>

<p>è‡³äº state çš„å®šä¹‰åŠåˆå§‹åŒ–ï¼Œæ”¾åœ¨ getInitialState ä¸­å³å¯ï¼Œè¾ƒä¸ºåŸºç¡€ï¼Œæ­¤å¤„ç•¥ã€‚</p>

<h2>æ”¶å·¥</h2>

<p>ğŸ‘ğŸ‘ğŸ‘</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[åˆ›å»ºä¸€ä¸ª React Native åˆ†éš”çº¿ç»„ä»¶]]></title>
    <link href="http://balloonsys.github.io/blog/2016/09/30/create-your-first-reusable-react-native-component/"/>
    <updated>2016-09-30T10:24:06+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/09/30/create-your-first-reusable-react-native-component</id>
    <content type="html"><![CDATA[<p>åœ¨ç§»åŠ¨ç«¯è¡¨å•é¡µé¢é‡Œæœ‰ä¸å°‘åˆ†éš”çº¿ç»˜åˆ¶éœ€æ±‚ï¼Œæ„é€ ä¸€ä¸ªç»„ä»¶ä»¥åœ¨ä¸åŒé¡µé¢å¤ç”¨æ˜¯ä¸ªå¾ˆè‡ªç„¶çš„åšæ³•ã€‚</p>

<!--more-->


<h2>ç›®æ ‡</h2>

<p>æœŸæœ›åœ¨å„é¡µé¢å¯¼å…¥ require è¯¥ç»„ä»¶åï¼Œç›´æ¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ç»˜åˆ¶åˆ†éš”çº¿ï¼š</p>

<pre><code class="js">&lt;Line height={1} paddingLeft={10} paddingRight={0} backgroundColor='white' /&gt;
</code></pre>

<p>å½“ç„¶ä¹Ÿä¸ºä¸Šè¿°å››ä¸ªå±æ€§æä¾›é»˜è®¤å€¼ï¼Œå¦‚æœé»˜è®¤å€¼ç¬¦åˆéœ€æ±‚ï¼Œåˆ™åªéœ€ï¼š</p>

<pre><code class="js">&lt;Line /&gt;
</code></pre>

<h2>æ‰€éœ€æŠ€æœ¯</h2>

<h3>åˆ›å»ºç±»</h3>

<p>æˆ‘é‡‡ç”¨çš„æ˜¯ ES 5 çš„è¯­æ³•åˆ›å»ºç±»çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="js">let Line = React.createClass({
  render() {
    return (
    );
  },
});

module.exports = Line;
</code></pre>

<p>å…¶ä¸­ render æ–¹æ³•ç±»ä¼¼äº Native å¼€å‘ä¸­è§†å›¾çš„ç»˜åˆ¶æ–¹æ³•ã€‚æˆ‘ä»¬ç¨ååœ¨å…¶ return ä¸­åŠ ä¸Šæ„å»ºä¸ React Native åŸºç¡€ç»„ä»¶ä¹‹ä¸Šçš„ XML ä»£ç ã€‚</p>

<h3>æ·»åŠ å±æ€§</h3>

<p>æ„å»ºè¯¥åˆ†éš”çº¿ç»„ä»¶ç»™å®¢æˆ·ç¨‹åºä½¿ç”¨ï¼Œéœ€è¦è®©åˆ«äººçŸ¥é“æ”¯æŒå“ªäº›å±æ€§ï¼Œæ¯”å¦‚çº¿çš„é«˜åº¦ã€å·¦å³ç¼©è¿›ã€èƒŒæ™¯è‰²åŠçº¿çš„é¢œè‰²ç­‰ã€‚</p>

<pre><code class="js">  propTypes: {
    height: React.PropTypes.number,
    paddingLeft: React.PropTypes.number,
    paddingRight: React.PropTypes.number,
    backgroundColor: React.PropTypes.string,
    lineColor: React.PropTypes.string,
  },
</code></pre>

<p>ä¸ºäº†ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™è¿™äº›å±æ€§æä¾›é»˜è®¤å€¼ï¼š</p>

<pre><code class="js">  getDefaultProps() {
    return {
      height: 0.5,
      paddingLeft: 0,
      paddingRight: 0,
      backgroundColor: '#FFFFFF',
      lineColor: '#D3D3D3',
    }
  },
</code></pre>

<h3>ç»˜åˆ¶æ§ä»¶</h3>

<p>å…·ä½“çš„ç»˜åˆ¶ä»£ç åœ¨ render æ–¹æ³•ä¸­å®Œæˆã€‚å¦‚å‰é¢æ‰€è¿°ï¼Œæˆ‘ä»¬å°†ç”¨åˆ° React Native æä¾›çš„åŸºç¡€ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä»£ç é¡¶éƒ¨å¯¼å…¥ã€‚</p>

<pre><code class="js">import React, { Component } from 'react';
import { View } from 'react-native';
</code></pre>

<p>æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨ render æ–¹æ³•çš„ return è¯­å¥ä¸­åŠ ä¸Šä¸‹é¢ä»£ç ä»¥å®Œæˆåˆ†éš”çº¿çš„ç»˜åˆ¶äº†ï¼š</p>

<pre><code class="xml">      &lt;View style={} &gt;
        &lt;View style={} /&gt;
      &lt;/View&gt;
</code></pre>

<p>å¤–å±‚çš„ View çš„ style å±æ€§è®¾ç½®ä¸ºï¼š</p>

<pre><code class="js">{backgroundColor: this.props.backgroundColor, height: this.props.height, paddingLeft: this.props.paddingLeft, paddingRight: this.props.paddingRight}
</code></pre>

<p>å†…å±‚çš„ View çš„ style å±æ€§è®¾ç½®ä¸ºï¼š</p>

<pre><code class="js">{flex: 1, backgroundColor: this.props.lineColor}
</code></pre>

<h2>æ€»ç»“</h2>

<p>æœ¬æ–‡é€‰å–æœ€æœ€ç®€å•çš„åˆ†éš”çº¿ä»‹ç» React Native å®è·µè¿‡ç¨‹ä¸­çš„ä»£ç ç¼–å†™æ€è·¯ï¼Œå®Œæˆçš„å…¶ä»–æ§ä»¶æœ‰è¡¨å•å¡«å†™è¿›åº¦ç­‰ã€‚</p>
]]></content>
  </entry>
  
</feed>
